<!DOCTYPE HTML>
<html lang="en" class="flint sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>system - The Flint Wiki</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/flint.css">
        <link rel="stylesheet" href="../../theme/flint-highlight.css">
        <link rel="stylesheet" href="../../version_select.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "flint";
            const default_dark_theme = "flint";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('flint')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Flint Wiki</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="system"><a class="header" href="#system">system</a></h1>
<pre><code class="language-ft">use Core.system
</code></pre>
<p>The <code>system</code> module provides functions to interact with the system, for example to execute system commands.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: right">Function Name</th><th style="text-align: center">Parameter Types</th><th style="text-align: center">Return Types</th><th style="text-align: center">Possible Errors</th></tr></thead><tbody>
<tr><td style="text-align: right"><code>system_command</code></td><td style="text-align: center"><code>str</code></td><td style="text-align: center"><code>i32</code>, <code>str</code></td><td style="text-align: center"><code>ErrSystem</code></td></tr>
<tr><td style="text-align: right"><code>get_cwd</code></td><td style="text-align: center">No</td><td style="text-align: center"><code>str</code></td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: right"><code>get_path</code></td><td style="text-align: center"><code>str</code></td><td style="text-align: center"><code>str</code></td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: right"><code>start_capture</code></td><td style="text-align: center">No</td><td style="text-align: center">No</td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: right"><code>end_capture</code></td><td style="text-align: center">No</td><td style="text-align: center"><code>str</code></td><td style="text-align: center">No</td></tr>
<tr><td style="text-align: right"><code>end_capture_lines</code></td><td style="text-align: center">No</td><td style="text-align: center"><code>str[]</code></td><td style="text-align: center">No</td></tr>
</tbody></table>
</div>
<h2 id="error-sets"><a class="header" href="#error-sets">error sets</a></h2>
<p>These are the error sets this Core module provides.</p>
<h3 id="errsystem"><a class="header" href="#errsystem">ErrSystem</a></h3>
<p>This error set does not have a parent error, so it directly and only extends <code>anyerror</code> directly. These are the possible values this error could have:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Error Value</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left"><code>EmptyCommand</code></td><td style="text-align: left">The provided command was empty</td></tr>
<tr><td style="text-align: left"><code>SpawnFailed</code></td><td style="text-align: left">Process could not be created</td></tr>
</tbody></table>
</div>
<h2 id="functions"><a class="header" href="#functions">functions</a></h2>
<p>These are the functions this Core module provides.</p>
<h3 id="system_command"><a class="header" href="#system_command">system_command</a></h3>
<p>The <code>system_command</code> function executes a given command, for example <code>ls -lah</code> and returns the exit code of the given command together with the output of the command, stored in a string. The function can throw an error if the process (the command) cannot be created.</p>
<pre><code class="language-ft">use Core.print
use Core.system

def main():
    (exit_code, output) = system_command("ls");
    print($"exit_code = {exit_code}\n");
    print($"--- OUTPUT ---\n {output}");
</code></pre>
<p>This program will print these lines to the console:</p>
<blockquote>
<pre><code>exit_code = 0
--- OUTPUT ---
build
build.zig
build.zig.zon
cmake
CMakeLists.txt
compile_flags.txt
documents
examples
fetch_crt.sh
include
LICENSE
logfile
lsp
main
main.o
main.obj
output.ll
README.md
resources
scripts
src
test
test_files
test.o
tests
vendor
</code></pre>
</blockquote>
<h3 id="get_cwd"><a class="header" href="#get_cwd">get_cwd</a></h3>
<p>The <code>get_cwd</code> function is used to get the current working directory. The current working directory is the directory in which the program was executed in. It's main purpose is to be used together with the <code>get_path</code> function to get paths to files relative to the executed program's directory.</p>
<pre><code class="language-ft">use Core.print
use Core.system

def main():
    str cwd = get_cwd();
    print($"cwd = {cwd}\n");
</code></pre>
<p>This program will print a line like this to your console:</p>
<blockquote>
<pre><code>cwd = /home/zweiler1/env/flint/flintc
</code></pre>
</blockquote>
<h3 id="get_path"><a class="header" href="#get_path">get_path</a></h3>
<p>The <code>get_path</code> function is used to convert a string to the platform-specific requirements for paths. You could get the cwd and then point to a file in a directory down, on Linux you would of course first get the cwd and store it in a variable like <code>cwd</code> and then to create the path to the file you would use string interpolation like <code>$"{cwd}/subdir/file.txt"</code>. But the <code>/</code> symbols are only used in Linux for paths, on Windows the <code>\\</code> is used instead so you would need to write <code>$"{cwd}\\subdir\\file.txt"</code> instead (<code>\\</code> because the backslash is used to escape a character, and the escaped backslash is just a single backslash character).
For this very use-case we use the <code>get_path</code> function. You pass in your path created using the string interpolation into the <code>get_path</code> function and it gives you back the exact same path, but with all the platform-specific requirements applied to it.</p>
<pre><code class="language-ft">use Core.print
use Core.system

def main():
    str cwd = get_cwd();
    str path_to_file = get_path($"{cwd}\\subdir\\file.txt");
    print($"path_to_file = {path_to_file}\n");
</code></pre>
<p>This program will print a line like this to your console:</p>
<blockquote>
<pre><code>path_to_file = /home/zweiler1/env/flint/flintc/subdir/file.txt
</code></pre>
</blockquote>
<p>If you are on Windows the path will look different, of course.</p>
<h3 id="start_capture"><a class="header" href="#start_capture">start_capture</a></h3>
<p>The <code>start_capture</code> function starts capturing the stdout. This means that nothing printed after the <code>start_capture</code> function will be printed to the console, but is being collected in a buffer and then we need to call the <code>end_capture</code> function to get everything which has been captured. There is no example of <code>start_capture</code> which could be shown without the <code>end_capture</code> function, so you will find the example there.</p>
<h3 id="end_capture"><a class="header" href="#end_capture">end_capture</a></h3>
<p>The <code>end_capture</code> function ends capturing stdout and returns the up-to-that-point captured output as a simple string.</p>
<pre><code class="language-ft">use Core.print
use Core.system

def main():
	start_capture();
	for (i, _) in 0..10:
		print($"i = {i}\n");
	str captured = end_capture();
	print($"captured = '{captured}'\n");
</code></pre>
<p>This program will print these lines to the console:</p>
<blockquote>
<pre><code>captured = 'i = 0
i = 1
i = 2
i = 3
i = 4
i = 5
i = 6
i = 7
i = 8
i = 9
'
</code></pre>
</blockquote>
<h3 id="end_capture_lines"><a class="header" href="#end_capture_lines">end_capture_lines</a></h3>
<p>The <code>end_capture_lines</code> function is essentially the same as the <code>end_capture</code> function with the only difference that the buffer string is split at all <code>\n</code> characters, meaning the <code>end_capture_lines</code> function returns a <code>str[]</code> where each element of the array is a single line which has been printed to the console.</p>
<pre><code class="language-ft">use Core.print
use Core.system

def main():
	start_capture();
	for (i, _) in 0..10:
		print($"i = {i}\n");
	str[] captured_lines = end_capture_lines();
	for (i, line) in captured_lines:
		print($"line[{i}]: {line}\n");
</code></pre>
<p>This program will print these lines to the console:</p>
<blockquote>
<pre><code>line[0]: i = 0
line[1]: i = 1
line[2]: i = 2
line[3]: i = 3
line[4]: i = 4
line[5]: i = 5
line[6]: i = 6
line[7]: i = 7
line[8]: i = 8
line[9]: i = 9
</code></pre>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../beginners_guide/8_core_modules/5_env.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../beginners_guide/8_core_modules/7_math.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../beginners_guide/8_core_modules/5_env.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../beginners_guide/8_core_modules/7_math.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../version_select.js"></script>


    </div>
    </body>
</html>
