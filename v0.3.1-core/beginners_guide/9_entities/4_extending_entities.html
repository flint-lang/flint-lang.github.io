<!DOCTYPE HTML>
<html lang="en" class="flint sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Extending Entities - The Flint Wiki</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/flint.css">
        <link rel="stylesheet" href="../../theme/flint-highlight.css">
        <link rel="stylesheet" href="../../version_select.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "flint";
            const default_dark_theme = "flint";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('flint')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Flint Wiki</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="extending-entities"><a class="header" href="#extending-entities">Extending Entities</a></h1>
<p>You already know that entities can contain multiple different <code>data</code> and <code>func</code> modules composed together to be able to model a specific type. But if you would need to write out <em>every</em> single <code>data</code> and <code>func</code> module an entity <strong>contains</strong> over and over again it would be very tedious and it also would become very messy fast. You simply would not be able to tell which data or func modules it really contains because it would drown in the sea of data and func modules.</p>
<p>For this very reason exists the <code>extends</code> clausel. It's not like the <code>extends</code> keyword in Java, for example. In OOP the <code>extends</code> keyword describes a direct indentity-relationship. In Flint it is a bit different. Since every entity is simply a <strong>collection</strong> of different <code>data</code> and <code>func</code> modules, the <code>extends</code> clausel simply takes all the <code>data</code> and <code>func</code> modules of the "extended" entity and places them in our new entity. Here is an example:</p>
<pre><code class="language-ft">use Core.print

data Data1:
	u32 value;
	Data1(value);

data Data2:
	f32 value;
	Data2(value);

data Data3:
	i32 value;
	Data3(value);

func Func1 requires(Data1 d1):
	def f1():
		print($"f1: {d1.value}\n");

func Func2 requires(Data2 d2):
	def f2():
		print($"f2: {d2.value}\n");

func Func3 requires(Data3 d3):
	def f3():
		print($"f3: {d3.value}\n");

entity Entity1:
	data: Data1;
	func: Func1;
	Entity1(Data1);

entity Entity2 extends(Entity1 e1):
	data: Data2;
	func: Func2;
	Entity2(e1, Data2);

entity Entity3 extends(Entity2 e2):
	data: Data3;
	func: Func3;
	Entity3(e2, Data3);

def main():
	e1 := Entity1(Data1(100));
	e1.f1();
	print("\n");

	e2 := Entity2(Data1(80), Data2(3.4));
	e2.f1();
	e2.f2();
	print("\n");

	e3 := Entity3(Data1(8), Data2(3.14), Data3(-30));
	e3.f1();
	e3.f2();
	e3.f3();
</code></pre>
<p>This program will print these lines to the console:</p>
<blockquote>
<pre><code>f1: 100

f1: 80
f2: 3.4

f1: 8
f2: 3.14
f3: -30
</code></pre>
</blockquote>
<p>Okay now let's go throug this example slowly. With the <code>extends</code> keywords we describe that <code>Entitiy2</code> <em>has</em> all the capabilities of <code>Entity1</code> but it <em>has</em> more. This is pretty similar to how you would think in OOP, but with one major difference: All <code>data</code> and <code>func</code> modules of extended entities <em>flatten out</em>. You see, every <code>func</code> module and every <code>data</code> module of every <code>entity</code> is essentially like a small "set" of modules. So the <code>Entity1</code> type has a data set of <code>{ Data1 }</code>, the <code>Entity2</code> type has a data set of <code>{ Data1, Data2 }</code>. This is because the <code>extends</code> clausel is essentially like a union operator. The new set of the new entity type is a union of all the data modules defined in it's body and all data modules from all extended entity types.</p>
<p>So, Flint will simply ignore all duplicates which come from any parent entities, however, if a data or func module is already defined in one of the parent entities, then Flint will shout out an error to you. If we change the definition of <code>Entity3</code> from the example above to something like this:</p>
<pre><code class="language-ft">entity Entity3 extends(Entity2 e2):
	data: Data2, Data3;
	func: Func3;
	Entity3(e2, Data3);
</code></pre>
<p>then we will get this compiler error telling us that we have defined a data module twice while defining it <em>manually</em> inside an entity:</p>
<blockquote>
<pre><code>Parse Error at main.ft:38:11
└──┬┤E0000│
37 │ entity Entity3 extends(Entity2 e2):
38 │ »   data: Data2, Data3;
┌──┴───────────┘
└─ Entity type defines data module 'Data2' twice
</code></pre>
</blockquote>
<p>As you can see, if you had defined a data or func type before and then added it to an entity the other entity extends, the compiler will tell you that you need to fix the entity that extends it, since it then would have been a double-inclusion, which is a good thing in my view, as it means that entity definitions will stay as minimal as possible ever over a long time period and potential changes to their "parent" entities.</p>
<p>Just like with the <code>requires</code> clausel you are <em>only</em> allowed to put values of type <code>entity</code> in the extends clausel, and just like the <code>requires</code> clausel you can extend as many other entities as you want. There do not exist any relationships between entities at runtime, they are all different types. This also means that you are <em>NOT</em> able to "cast" any entity type to any other entity type either.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../beginners_guide/9_entities/3_composition.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../beginners_guide/11_interop.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../beginners_guide/9_entities/3_composition.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../beginners_guide/11_interop.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../version_select.js"></script>


    </div>
    </body>
</html>
